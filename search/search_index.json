{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"docs/","text":"Authentication Method Description GET Fetch resource POST Submit data To authenticate with mafia you need to pass the user token with your POST request Getting the cookie Make a POST request to https://mafia.gg/api/user-session with this payload 1 { \"login\" : user na me , \"password\" : password } Response 1 2 3 4 5 6 7 8 9 10 { id : str , username : str , email : str ( email ), hostBannedUsernames : list , isPatreonLinked : bool , activePatreon : bool , needsVerification : bool , createdAt : str ( timestamp ) } Store this cookie Example (Get cookie) Python 1 2 3 4 5 6 7 from requests import Session with Session () as s : cookie = s . post ( URL , json = { 'login' : username , 'password' : password }) if cookie . status_code == 401 : raise WrongPassword ( \"You provided incorrect password\" ) cookie = cookie . cookies . get_dict ()","title":"Authentication"},{"location":"docs/#authentication","text":"Method Description GET Fetch resource POST Submit data To authenticate with mafia you need to pass the user token with your POST request","title":"Authentication"},{"location":"docs/#getting-the-cookie","text":"Make a POST request to https://mafia.gg/api/user-session with this payload 1 { \"login\" : user na me , \"password\" : password } Response 1 2 3 4 5 6 7 8 9 10 { id : str , username : str , email : str ( email ), hostBannedUsernames : list , isPatreonLinked : bool , activePatreon : bool , needsVerification : bool , createdAt : str ( timestamp ) } Store this cookie","title":"Getting the cookie"},{"location":"docs/#example-get-cookie","text":"Python 1 2 3 4 5 6 7 from requests import Session with Session () as s : cookie = s . post ( URL , json = { 'login' : username , 'password' : password }) if cookie . status_code == 401 : raise WrongPassword ( \"You provided incorrect password\" ) cookie = cookie . cookies . get_dict ()","title":"Example (Get cookie)"},{"location":"docs/deck/","text":"Deck Get a list of all decks Make a GET request to https://mafia.gg/api/decks?filter&page=num num indicates the page to display Response 1 2 3 4 5 6 { pagination : { page : int , numPages : int , total : int }, decks : [{ name : str , version : int , key : DECKID , builtin : bool , deckSize : int , uploadTimestamp : int ( timestamp ), sampleCharacters : [{ playerId : int , name : str , avatarUrl : str , backgroundColor : str ( hex )}, ... ]}]} Check numPages for total number of pages Get deck by ID Make a GET request to https://mafia.gg/api/decks/deckId Response 1 2 3 4 5 6 7 8 { name : str , version : int , key : DECKID , builtin : bool , deckSize : int , uploadTimestamp : int ( timestamp ), sampleCharacters : [{ playerId : int , name : str , avatarUrl : str , backgroundColor : str ( hex )}, ... ] }","title":"Deck"},{"location":"docs/deck/#deck","text":"","title":"Deck"},{"location":"docs/deck/#get-a-list-of-all-decks","text":"Make a GET request to https://mafia.gg/api/decks?filter&page=num num indicates the page to display Response 1 2 3 4 5 6 { pagination : { page : int , numPages : int , total : int }, decks : [{ name : str , version : int , key : DECKID , builtin : bool , deckSize : int , uploadTimestamp : int ( timestamp ), sampleCharacters : [{ playerId : int , name : str , avatarUrl : str , backgroundColor : str ( hex )}, ... ]}]} Check numPages for total number of pages","title":"Get a list of all decks"},{"location":"docs/deck/#get-deck-by-id","text":"Make a GET request to https://mafia.gg/api/decks/deckId Response 1 2 3 4 5 6 7 8 { name : str , version : int , key : DECKID , builtin : bool , deckSize : int , uploadTimestamp : int ( timestamp ), sampleCharacters : [{ playerId : int , name : str , avatarUrl : str , backgroundColor : str ( hex )}, ... ] }","title":"Get deck by ID"},{"location":"docs/game/","text":"Game (websocket) Start a game Payload 1 { \"type\" : \"startGame\" } Start a new game Payload 1 { 'type' : 'newGame' , 'roomId' : int ( roomId )} Send a message Payload 1 { 'type' : 'chat' , 'message' : str } Response 1 2 3 4 5 { message : str , from : { model : 'user' / 'player' , userid : int , playerid : int } }","title":"Game"},{"location":"docs/game/#game","text":"(websocket)","title":"Game"},{"location":"docs/game/#start-a-game","text":"Payload 1 { \"type\" : \"startGame\" }","title":"Start a game"},{"location":"docs/game/#start-a-new-game","text":"Payload 1 { 'type' : 'newGame' , 'roomId' : int ( roomId )}","title":"Start a new game"},{"location":"docs/game/#send-a-message","text":"Payload 1 { 'type' : 'chat' , 'message' : str } Response 1 2 3 4 5 { message : str , from : { model : 'user' / 'player' , userid : int , playerid : int } }","title":"Send a message"},{"location":"docs/ping/","text":"Ping (websocket) Is used to ping the mafia websocket Payload 1 { \"type\" : \"ping\" } Response 1 { timestamp : int ( timestamp ), sid : int }","title":"Ping"},{"location":"docs/ping/#ping","text":"(websocket) Is used to ping the mafia websocket Payload 1 { \"type\" : \"ping\" } Response 1 { timestamp : int ( timestamp ), sid : int }","title":"Ping"},{"location":"docs/presence/","text":"Presence (websocket) This is used to indicate to mafia whether you are a Player/Spectator Payload 1 { 'type' : 'presence' , 'isPlayer' : bool } A value of isPlayer False means that you're a spectator while a value of True means you're a player","title":"Presence"},{"location":"docs/presence/#presence","text":"(websocket) This is used to indicate to mafia whether you are a Player/Spectator Payload 1 { 'type' : 'presence' , 'isPlayer' : bool } A value of isPlayer False means that you're a spectator while a value of True means you're a player","title":"Presence"},{"location":"docs/rooms/","text":"Rooms Get all rooms Making a GET request to https://mafia.gg/api/rooms returns a list of running rooms Response 1 2 3 4 5 6 7 8 9 10 11 [ { id : int , name : str , hasStarted : bool , playerCount : int , setupSize : int , hostUser : { id : int , username : str , activepatreon : bool , createdAt : str ( timestamp )} , createdAt : str ( timestamp )}, .... ] Get room by ID Making a GET request to https://mafia.gg/api/rooms/roomID retuns data about that room Payload - cookie Options 1 2 3 4 { 'name' : str , 'unlisted' : bool } Response 1 { engineUrl : str , auth : str } engineUrl is websocket url you will be communicating with auth is used to authenticate the room with mafia Example (Create a room) Creating a room and getting it's ID Python 1 2 3 4 5 6 7 8 from requests import Session from json import loads with Session () as s : resp = loads ( s . post ( 'https://mafia.gg/api/rooms/' , cookies = cookie , json = options ) . content ) roomId = resp [ 'id' ] Authenticating room with mafia Python 1 2 3 4 with Session () as s : resp = loads ( s . get ( f \"https://mafia.gg/api/rooms/ { roomId } \" , cookies = self . user . cookie ) . content ) engine , auth = resp [ 'engineUrl' ], resp [ 'auth' ] Creating a new room To create a room from the data we have, we need to make a websocket connection to the url we retrieved engine Payload 1 2 3 4 5 { 'type' : 'clientHandshake' , 'userId' : str ( userId ), 'roomId' : int ( roomId ), 'auth' : str } Example (connection) Python 1 2 3 4 from websockets import connect ws = await connect ( engine , ssl = True ) await ws . dump ( json_payload ) response = loads ( await self . ws . recv ())","title":"Rooms"},{"location":"docs/rooms/#rooms","text":"","title":"Rooms"},{"location":"docs/rooms/#get-all-rooms","text":"Making a GET request to https://mafia.gg/api/rooms returns a list of running rooms Response 1 2 3 4 5 6 7 8 9 10 11 [ { id : int , name : str , hasStarted : bool , playerCount : int , setupSize : int , hostUser : { id : int , username : str , activepatreon : bool , createdAt : str ( timestamp )} , createdAt : str ( timestamp )}, .... ]","title":"Get all rooms"},{"location":"docs/rooms/#get-room-by-id","text":"Making a GET request to https://mafia.gg/api/rooms/roomID retuns data about that room Payload - cookie Options 1 2 3 4 { 'name' : str , 'unlisted' : bool } Response 1 { engineUrl : str , auth : str } engineUrl is websocket url you will be communicating with auth is used to authenticate the room with mafia","title":"Get room by ID"},{"location":"docs/rooms/#example-create-a-room","text":"Creating a room and getting it's ID Python 1 2 3 4 5 6 7 8 from requests import Session from json import loads with Session () as s : resp = loads ( s . post ( 'https://mafia.gg/api/rooms/' , cookies = cookie , json = options ) . content ) roomId = resp [ 'id' ] Authenticating room with mafia Python 1 2 3 4 with Session () as s : resp = loads ( s . get ( f \"https://mafia.gg/api/rooms/ { roomId } \" , cookies = self . user . cookie ) . content ) engine , auth = resp [ 'engineUrl' ], resp [ 'auth' ]","title":"Example (Create a room)"},{"location":"docs/rooms/#creating-a-new-room","text":"To create a room from the data we have, we need to make a websocket connection to the url we retrieved engine Payload 1 2 3 4 5 { 'type' : 'clientHandshake' , 'userId' : str ( userId ), 'roomId' : int ( roomId ), 'auth' : str }","title":"Creating a new room"},{"location":"docs/rooms/#example-connection","text":"Python 1 2 3 4 from websockets import connect ws = await connect ( engine , ssl = True ) await ws . dump ( json_payload ) response = loads ( await self . ws . recv ())","title":"Example (connection)"},{"location":"docs/user/","text":"User Get user by ID To get a user by their ID, make a GET request to https://mafia.gg/api/users/userID Response 1 2 3 { id : int , username : str , activepatreon : bool , createdAt : str ( timestamp )} See your user data Make a GET request to https://mafia.gg/api/user Response - Same as https://mafia.gg/api/user-session","title":"User"},{"location":"docs/user/#user","text":"","title":"User"},{"location":"docs/user/#get-user-by-id","text":"To get a user by their ID, make a GET request to https://mafia.gg/api/users/userID Response 1 2 3 { id : int , username : str , activepatreon : bool , createdAt : str ( timestamp )}","title":"Get user by ID"},{"location":"docs/user/#see-your-user-data","text":"Make a GET request to https://mafia.gg/api/user Response - Same as https://mafia.gg/api/user-session","title":"See your user data"}]}